route:
  # group_by: ['alertname', 'job']
  group_wait: 30s
  group_interval: 5m
  repeat_interval: 5m
  receiver: discord
  routes:
    - receiver: discord
      group_wait: 30s
      match_re:
        severity: critical|warning
      continue: true

    - receiver: email
      group_wait: 30s
      match_re:
        severity: critical
      continue: true

receivers:
- name: discord
  discord_configs:
  - webhook_url: {{ discord_webhook_url }}

- name: email
  email_configs:
    - to: {{ admin_user_email }}
      from: {{ auth_username }}
      smarthost: {{ smtp_server }}
      auth_username: {{ auth_username }}
      auth_identity: {{ auth_username }}
      auth_password: {{ auth_password }}
      headers:
          subject: 'Prometheus Mail Alerts'
